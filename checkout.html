<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #F8F8F8;
      margin: 0;
      padding: 0;
    }
    .checkout-container {
      display: flex;
      gap: 32px;
      max-width: 1200px;
      margin: 40px auto;
    }
    .main-section {
      flex: 2;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
      padding: 32px;
    }
    .summary-section {
      flex: 1;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
      padding: 32px;
      height: fit-content;
    }
    .section-title {
      font-size: 1.4em;
      font-weight: bold;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .product-item {
      display: flex;
      gap: 24px;
      align-items: flex-start;
      margin-bottom: 24px;
      border-bottom: 1px solid #ececec;
      padding-bottom: 16px;
    }
    .product-image {
      width: 100px;
      height: 100px;
      object-fit: contain;
      border-radius: 6px;
      background: #eee;
    }
    .product-details {
      flex: 1;
    }
    .product-title {
      font-weight: bold;
      font-size: 1.1em;
      margin: 5px 0;
    }
    .remove-btn {
      background: #fff;
      border: 1px solid #E53935;
      color: #E53935;
      padding: 8px 18px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 12px;
      transition: all 0.15s;
    }
    .remove-btn:hover {
      background: #E53935;
      color: #fff;
    }
    .services-section {
      margin-top: 32px;
      background: #fafafa;
      padding: 20px 24px;
      border-radius: 8px;
    }
    .services-title {
      font-size: 1.1em;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }
    .service-options {
      margin-top: 10px;
      margin-bottom: 5px;
    }
    .service-options label {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      cursor: pointer;
      font-size: 1em;
      gap: 8px;
    }
    .service-options input[type="radio"] {
      accent-color: #FF6600;
    }
    .resume-title {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .summary-section .row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 1em;
    }
    .summary-section .highlight {
      background: #E7FFF0;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 20px;
      font-weight: bold;
      color: #007D3A;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .summary-section button {
      width: 100%;
      padding: 14px 0;
      border-radius: 6px;
      font-size: 1.1em;
      font-weight: bold;
      margin-top: 16px;
      cursor: pointer;
      border: none;
      transition: background 0.15s;
    }
    .continue-btn {
      background: #FF6600;
      color: #fff;
      margin-bottom: 10px;
    }
    .continue-btn:hover {
      background: #E85D04;
    }
    .back-btn {
      background: #fff;
      color: #FF6600;
      border: 2px solid #FF6600;
    }
    .back-btn:hover {
      background: #FFEFE3;
    }
    .remove-all-btn {
      float: right;
      background: #fff;
      border: 1px solid #E53935;
      color: #E53935;
      font-weight: bold;
      border-radius: 6px;
      padding: 8px 18px;
      cursor: pointer;
      margin-top: -10px;
      margin-bottom: 20px;
      transition: all 0.15s;
    }
    .remove-all-btn:hover {
      background: #E53935;
      color: #fff;
    }
    .empty-cart {
      color: #888;
      font-size: 1.15em;
      text-align: center;
      margin: 48px 0;
    }
    @media (max-width: 900px) {
      .checkout-container { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div id="header"></div>

  <div class="checkout-container">
    <!-- Main Section -->
    <div class="main-section">
      <div class="section-title">
        <span>üõí</span> PRODUTO E SERVI√áO
        <button class="remove-all-btn" id="btn-limpar">REMOVER TODOS OS PRODUTOS</button>
      </div>
      <div id="produtos-lista"></div>
      <div class="services-section" id="services-section" style="display:none;">
        <div class="services-title">
          <span>üõ°Ô∏è</span> SERVI√áOS
        </div>
        <div style="font-weight:bold; margin-bottom:8px;">GARANTIA ESTENDIDA ORIGINAL AMPLIADA</div>
        <div class="service-options">
          <label>
            <input type="radio" name="garantia" checked> Sem garantia
          </label>
          <label>
            <input type="radio" name="garantia"> 12 Meses de Garantia Estendida
            <span title="Informa√ß√£o" style="color:#FF6600; cursor:pointer;">&#9432;</span>
            <span style="margin-left:auto; font-size:0.95em;">At√© 10x sem juros</span>
          </label>
          <label>
            <input type="radio" name="garantia"> 24 Meses de Garantia Estendida
            <span title="Informa√ß√£o" style="color:#FF6600; cursor:pointer;">&#9432;</span>
            <span style="margin-left:auto; font-size:0.95em;">At√© 10x sem juros</span>
          </label>
        </div>
        <div style="font-size:0.95em;color:#888; margin-top:6px;">
          Ao adicionar a <b>Garantia Estendida Original Ampliada</b>, declaro que tive acesso, li e aceito as 
          <a href="#" style="color:#FF6600;">Condi√ß√µes gerais</a>
        </div>
        <div style="margin-top:10px;font-weight:bold;">Subtotal servi√ßos: R$ 0,00</div>
      </div>
    </div>
    <!-- Summary Section -->
    <div class="summary-section">
      <div class="resume-title"><span>üìÑ</span> RESUMO</div>
      <div class="row">
        <span>Valor dos Produtos:</span>
        <span id="valorProdutos">R$ 0,00</span>
      </div>
      <div class="row" style="color:#555;">
        <span>Total a prazo:</span>
        <span id="totalPrazo">R$ 0,00</span>
      </div>
      <div style="color:#888; font-size:0.95em; margin-bottom:12px;" id="parcelasRow">
        (em at√© <b>10x</b> de <b>R$ 0,00</b> sem juros)
      </div>
      <div class="highlight" id="pixBox" style="display:none;">
        Valor √† vista no <span style="color:#00821E;"><b>PIX:</b></span>
        <span style="font-size:1.1em;" id="valorPix">R$ 0,00</span>
        <span style="font-size:0.9em; color:#00821E;" id="economize">(Economize: R$ 0,00)</span>
      </div>
      <button class="continue-btn">CONTINUAR</button>
      <button class="back-btn" onclick="window.location='index.html'">VOLTAR</button>
    </div>
  </div>

  <div id="footer"></div>

  <script>
    // Header e footer din√¢micos
    fetch('header.html')
      .then(res => res.text())
      .then(data => document.getElementById('header').innerHTML = data);

    fetch('footer.html')
      .then(res => res.text())
      .then(data => document.getElementById('footer').innerHTML = data);

    // Exemplo: o carrinho deve ser um array de objetos { nome, preco, imagem (opcional) }
    const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
    const lista = document.getElementById('produtos-lista');
    const btnLimpar = document.getElementById('btn-limpar');
    const servicesSection = document.getElementById('services-section');

    let total = 0;

    function renderCarrinho() {
      lista.innerHTML = '';
      total = 0;

      if (carrinho.length === 0) {
        lista.innerHTML = `<div class="empty-cart">Seu carrinho est√° vazio.</div>`;
        btnLimpar.style.display = 'none';
        servicesSection.style.display = 'none';
        atualizarResumo();
        return;
      } else {
        btnLimpar.style.display = '';
        servicesSection.style.display = '';
      }

      carrinho.forEach((item, index) => {
        total += item.preco;
        const div = document.createElement('div');
        div.className = 'product-item';
        div.innerHTML = `
          <img src="${item.imagem || 'https://via.placeholder.com/100x100?text=Produto'}" alt="Produto" class="product-image">
          <div class="product-details">
            <span style="font-size:0.96em;color:#888">${item.marca || ''}</span>
            <div class="product-title">${item.nome}</div>
            <span style="font-size:0.95em;color:#666">
              Com desconto no PIX: <b>${formatarReal(item.preco * 0.93)}</b><br>
              Parcelado no cart√£o sem juros: <b>${formatarReal(item.preco)}</b>
            </span>
            <button class="remove-btn" onclick="removerItem(${index})">REMOVER</button>
          </div>
          <div style="text-align:center; min-width:120px;">
            <div style="font-size:0.95em;color:#888;">Quant.</div>
            <div style="font-size:1.3em;font-weight:bold;">1</div>
            <div style="font-size:0.95em;color:#888;">Pre√ßo √† vista no PIX:</div>
            <div style="font-size:1.15em;color:#FF6600;font-weight:bold;">${formatarReal(item.preco * 0.93)}</div>
          </div>
        `;
        lista.appendChild(div);
      });
      atualizarResumo();
    }

    function removerItem(index) {
      carrinho.splice(index, 1);
      localStorage.setItem('carrinho', JSON.stringify(carrinho));
      renderCarrinho();
    }

    btnLimpar.onclick = function() {
      localStorage.removeItem('carrinho');
      window.location.reload();
    }

    function formatarReal(valor) {
      return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    function atualizarResumo() {
      // Totais
      document.getElementById('valorProdutos').textContent = formatarReal(total);
      document.getElementById('totalPrazo').textContent = formatarReal(total);
      document.getElementById('parcelasRow').innerHTML = `(em at√© <b>10x</b> de <b>${formatarReal(total/10)}</b> sem juros)`;

      // PIX: 7% de desconto
      if (total > 0) {
        let totalPix = total * 0.93;
        let economize = total - totalPix;
        document.getElementById('pixBox').style.display = '';
        document.getElementById('valorPix').textContent = formatarReal(totalPix);
        document.getElementById('economize').innerHTML = `(Economize: ${formatarReal(economize)})`;
      } else {
        document.getElementById('pixBox').style.display = 'none';
      }
    }

    // Exibe carrinho ao carregar
    renderCarrinho();

    // Torna a fun√ß√£o global para onclick do bot√£o remover
    window.removerItem = removerItem;
  </script>
</body>
</html>
